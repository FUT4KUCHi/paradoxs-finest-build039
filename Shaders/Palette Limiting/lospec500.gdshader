// https://lospec.com/palette-list/lospec500

shader_type canvas_item;

uniform sampler2D SCREEN_TEXTURE: hint_screen_texture, filter_linear_mipmap;

uniform vec4 color_01 =vec4(0.06274509803921569, 0.07058823529411765, 0.10980392156862745, 1.0);
uniform vec4 color_02 =vec4(0.17254901960784313, 0.11764705882352941, 0.19215686274509805, 1.0);
uniform vec4 color_03 =vec4(0.4196078431372549, 0.14901960784313725, 0.2627450980392157, 1.0);
uniform vec4 color_04 =vec4(0.6745098039215687, 0.1568627450980392, 0.2784313725490196, 1.0);
uniform vec4 color_05 =vec4(0.9254901960784314, 0.15294117647058825, 0.24705882352941178, 1.0);
uniform vec4 color_06 =vec4(0.5803921568627451, 0.28627450980392155, 0.22745098039215686, 1.0);
uniform vec4 color_07 =vec4(0.8705882352941177, 0.36470588235294116, 0.22745098039215686, 1.0);
uniform vec4 color_08 =vec4(0.9137254901960784, 0.5215686274509804, 0.21568627450980393, 1.0);
uniform vec4 color_09 =vec4(0.9529411764705882, 0.6588235294117647, 0.2, 1.0);
uniform vec4 color_10 =vec4(0.30196078431372547, 0.20784313725490197, 0.2, 1.0);
uniform vec4 color_11 =vec4(0.43137254901960786, 0.2980392156862745, 0.18823529411764706, 1.0);
uniform vec4 color_12 =vec4(0.6352941176470588, 0.42745098039215684, 0.24705882352941178, 1.0);
uniform vec4 color_13 =vec4(0.807843137254902, 0.5725490196078431, 0.2823529411764706, 1.0);
uniform vec4 color_14 =vec4(0.8549019607843137, 0.6941176470588235, 0.38823529411764707, 1.0);
uniform vec4 color_15 =vec4(0.9098039215686274, 0.8235294117647058, 0.5098039215686274, 1.0);
uniform vec4 color_16 =vec4(0.9686274509803922, 0.9529411764705882, 0.7176470588235294, 1.0);
uniform vec4 color_17 =vec4(0.11764705882352941, 0.25098039215686274, 0.26666666666666666, 1.0);
uniform vec4 color_18 =vec4(0, .396078431372549, 0.32941176470588235, 1.0);
uniform vec4 color_19 =vec4(0.14901960784313725, 0.5215686274509804, 0.2980392156862745, 1.0);
uniform vec4 color_20 =vec4(0.35294117647058826, 0.7098039215686275, 0.3215686274509804, 1.0);
uniform vec4 color_21 =vec4(0.615686274509804, 0.9019607843137255, 0.3058823529411765, 1.0);
uniform vec4 color_22 =vec4(0, 0.5450980392156862, 0.5450980392156862, 1.0);
uniform vec4 color_23 =vec4(0.3843137254901961, 0.6431372549019608, 0.4666666666666667, 1.0);
uniform vec4 color_24 =vec4(0.6509803921568628, 0.796078431372549, 0.5882352941176471, 1.0);
uniform vec4 color_25 =vec4(0.8274509803921568, 0.9333333333333333, 0.8274509803921568, 1.0);
uniform vec4 color_26 =vec4(0.24313725490196078, 0.23137254901960785, 0.396078431372549, 1.0);
uniform vec4 color_27 =vec4(0.2196078431372549, 0.34901960784313724, 0.7019607843137254, 1.0);
uniform vec4 color_28 =vec4(0.2, 0.5333333333333333, 0.8705882352941177, 1.0);
uniform vec4 color_29 =vec4(0.21176470588235294, 0.7725490196078432, 0.9568627450980393, 1.0);
uniform vec4 color_30 =vec4(0.42745098039215684, 0.9176470588235294, 0.8392156862745098, 1.0);
uniform vec4 color_31 =vec4(0.3686274509803922, 0.3568627450980392, 0.5490196078431373, 1.0);
uniform vec4 color_32 =vec4(0.5490196078431373, 0.47058823529411764, 0.6470588235294118, 1.0);
uniform vec4 color_33 =vec4(0.6901960784313725, 0.6549019607843137, 0.7215686274509804, 1.0);
uniform vec4 color_34 =vec4(0.8705882352941177, 0.807843137254902, 0.9294117647058824, 1.0);
uniform vec4 color_35 =vec4(0.6039215686274509, 0.30196078431372547, 0.4627450980392157, 1.0);
uniform vec4 color_36 =vec4(0.7843137254901961, 0.47058823529411764, 0.6862745098039216, 1.0);
uniform vec4 color_37 =vec4(0.8, 0.6, 1, 1.0);
uniform vec4 color_38 =vec4(0.9803921568627451, 0.43137254901960786, 0.4745098039215686, 1.0);
uniform vec4 color_39 =vec4(1, 0.6352941176470588, 0.6745098039215687, 1.0);
uniform vec4 color_40 =vec4(1, 0.8196078431372549, 0.8352941176470589, 1.0);
uniform vec4 color_41 =vec4(0.9647058823529412, 0.9098039215686274, 0.8784313725490196, 1.0);
uniform vec4 color_42 =vec4(1, 1, 1, 1.0);
void vertex() {

}

void fragment() {
	vec4 colors[42] = {color_01, color_02, color_03, color_04, color_05, color_06, color_07, color_08, color_09, color_10,
	color_11, color_12, color_13, color_14, color_15, color_16, color_17, color_18, color_19, color_20, color_21, color_22,
	color_23, color_24, color_25, color_26, color_27, color_28, color_29, color_30, color_31, color_32, color_33, color_34,
	color_35, color_36, color_37, color_38, color_39, color_40, color_41, color_42};
	vec4 pixel = textureLod(SCREEN_TEXTURE, SCREEN_UV, 0.0);

	float min_difference = 1000.0;
	vec4 min_color = vec4(0.0, 0.0, 0.0, 1.0);

	for (int i = 0; i < colors.length(); i++) {
		float current_distance = distance(colors[i], pixel);
		if (current_distance < min_difference) {
			min_difference = current_distance;
			min_color = colors[i];
		}
	}
	COLOR.rgb = min_color.rgb;
}

// Palette Limitng Shader, 2025
// @m0m0.rei, @ludwig.FTKC